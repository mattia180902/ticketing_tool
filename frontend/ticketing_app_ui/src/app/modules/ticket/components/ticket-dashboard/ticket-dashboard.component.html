<div class="dashboard-grid">
  <!-- Riepilogo count per stato -->
  <div class="grid">
    <div class="col-12 md:col-3">
      <p-card header="Total Tickets" styleClass="clickable-card primary">
        <div class="text-center">
          <h2>{{ counts?.totalTickets }}</h2>
        </div>
      </p-card>
    </div>
    <div class="col-12 md:col-3" *ngIf="counts">
      <p-card
        header="Open"
        styleClass="clickable-card info"
        (click)="goToTickets('OPEN')"
      >
        <div class="text-center">
          <h2>{{ counts.openTickets }}</h2>
        </div>
      </p-card>
    </div>
    <div class="col-12 md:col-3">
      <p-card
        header="Answered"
        styleClass="clickable-card success"
        (click)="goToTickets('ANSWERED')"
      >
        <div class="text-center">
          <h2>{{ counts?.answeredTickets }}</h2>
        </div>
      </p-card>
    </div>
    <div class="col-12 md:col-3">
      <p-card
        header="Solved"
        styleClass="clickable-card success"
        (click)="goToTickets('SOLVED')"
      >
        <div class="text-center">
          <h2>{{ counts?.solvedTickets }}</h2>
        </div>
      </p-card>
    </div>
    <div class="col-12 md:col-3">
        <p-card
          header="Draft"
          styleClass="clickable-card contrast"
          role="button"
          (click)="goToTickets('DRAFT')"
        >
          <div class="text-center">
            <h2>{{ localDraftCount }}</h2>
          </div>
        </p-card>
      </div>
      
  </div>

  <!-- Tabella ultimi 5 ticket -->
  <p-card header="Ultimi ticket" class="mt-4">
    <p-table
      *ngIf="tickets.length > 0"
      [value]="tickets"
      [paginator]="false"
      [responsiveLayout]="'scroll'"
    >
      <ng-template pTemplate="header">
        <tr>
          <th>Oggetto</th>
          <th>Servizio</th>
          <th>Priorit√†</th>
          <th>Stato</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-ticket>
        <tr>
          <td>{{ ticket.title }}</td>
          <td>{{ ticket.service.name }}</td> 
          <td>{{ ticket.priority }}</td>
          <td>
            <p-badge
              [value]="ticket.status"
              [severity]="statusColor(ticket.status)"
            ></p-badge>
          </td>
        </tr>
      </ng-template>
    </p-table>

    <p-message
      *ngIf="tickets.length === 0"
      severity="info"
      text="Nessun ticket disponibile."
      class="mt-3"
    ></p-message>
  </p-card>
</div>
